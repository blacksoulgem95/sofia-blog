@import "tailwindcss";

@import "./base.css" layer(components);
@import "./blog.css" layer(components);
@import "./vscode-editor.css" layer(components);
@import "nes.css/css/nes.css" layer(components);

@plugin "@tailwindcss/typography";

@layer base {
    :root {
        --font-sans: "Courier New", Courier, monospace;
        --font-pixel:
            "Press Start 2P", "Perfect DOS VGA 437", "MS Gothic", "Terminal",
            "Courier New", monospace;

        --shadow-search:
            0 -1px 27px 0 rgba(0, 0, 0, 0.04), 0 4px 15px 0 rgba(0, 0, 0, 0.08);
        --site-gradient-background: repeating-linear-gradient(
            0deg,
            #000000 0px,
            #111111 1px,
            #222222 2px,
            #000000 3px
        );

        /* Retro Gaming Colors */
        --color-trans-light-blue: #00ffff; /* Bright cyan */
        --color-trans-pink: #ff00ff; /* Magenta */
        --color-trans-white: #ffffff;

        /* Additional PS1/NES colors */
        --color-retro-green: #00ff00;
        --color-retro-yellow: #ffff00;
        --color-retro-red: #ff0000;
        --color-retro-blue: #0000ff;
        --color-retro-dark: #1a1a1a;
        --color-retro-gray: #808080;

        /* Low-poly pattern variables */
        --low-poly-size: 20px;
        --low-poly-color1: rgba(0, 255, 255, 0.1);
        --low-poly-color2: rgba(255, 0, 255, 0.1);
        --low-poly-color3: rgba(0, 255, 0, 0.1);
    }

    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--color-retro-gray, currentcolor);
        image-rendering: pixelated;
        image-rendering: -moz-crisp-edges;
        image-rendering: crisp-edges;
    }

    body {
        font-family: var(--font-pixel);
        background:
            repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.8) 0px,
                rgba(26, 26, 26, 0.8) 2px,
                rgba(0, 0, 0, 0.8) 4px
            ),
            repeating-linear-gradient(
                45deg,
                var(--low-poly-color1) 0,
                var(--low-poly-color1) var(--low-poly-size),
                var(--low-poly-color2) var(--low-poly-size),
                var(--low-poly-color2) calc(var(--low-poly-size) * 2),
                var(--low-poly-color3) calc(var(--low-poly-size) * 2),
                var(--low-poly-color3) calc(var(--low-poly-size) * 3)
            ),
            radial-gradient(circle at 50% 50%, #1a1a1a 0%, #000000 100%);
        background-attachment: fixed;
        background-size:
            auto,
            calc(var(--low-poly-size) * 3) calc(var(--low-poly-size) * 3),
            cover;
        color: var(--color-trans-white);
        text-rendering: geometricPrecision;
        -webkit-font-smoothing: none;
        -moz-osx-font-smoothing: grayscale;
        animation: low-poly-shift 20s linear infinite;
    }

    /* Retro CRT screen effect with animation */
    body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: repeating-linear-gradient(
            0deg,
            transparent 0px,
            rgba(0, 255, 255, 0.02) 1px,
            transparent 2px,
            rgba(255, 0, 255, 0.02) 3px,
            transparent 4px
        );
        pointer-events: none;
        z-index: 1;
        mix-blend-mode: overlay;
        animation: scanlines 0.1s linear infinite;
    }
}

@layer utilities {
    .shadow-search {
        box-shadow:
            0 0 15px 5px var(--color-trans-light-blue),
            0 0 25px 10px var(--color-trans-pink),
            inset 0 0 10px rgba(0, 255, 255, 0.2);
        border: 2px solid var(--color-trans-light-blue);
        animation: retro-pulse 2s infinite alternate;
        image-rendering: pixelated;
    }

    .bg-sparkly {
        background:
            var(--site-gradient-background),
            repeating-linear-gradient(
                45deg,
                var(--low-poly-color1) 0,
                var(--low-poly-color1) var(--low-poly-size),
                var(--low-poly-color2) var(--low-poly-size),
                var(--low-poly-color2) calc(var(--low-poly-size) * 2),
                var(--low-poly-color3) calc(var(--low-poly-size) * 2),
                var(--low-poly-color3) calc(var(--low-poly-size) * 3)
            ),
            repeating-conic-gradient(
                from 0deg at 50% 50%,
                #000000 0deg 45deg,
                #1a1a1a 45deg 90deg,
                #000000 90deg 135deg,
                #1a1a1a 135deg 180deg,
                #000000 180deg 225deg,
                #1a1a1a 225deg 270deg,
                #000000 270deg 315deg,
                #1a1a1a 315deg 360deg
            );
        background-size:
            4px 4px,
            calc(var(--low-poly-size) * 3) calc(var(--low-poly-size) * 3),
            8px 8px;
        background-repeat: repeat;
        animation: retro-scroll 10s linear infinite;
    }

    .retro-button {
        background: linear-gradient(145deg, #333333, #1a1a1a);
        border: 3px solid var(--color-trans-light-blue);
        box-shadow:
            0 0 10px var(--color-trans-light-blue),
            inset 0 0 5px rgba(0, 255, 255, 0.3);
        text-shadow: 0 0 5px currentColor;
        transition: all 0.1s ease;
        image-rendering: pixelated;
        font-family: var(--font-pixel);
        letter-spacing: 1px;
        padding: 12px 16px;
        overflow-wrap: break-word;
        word-wrap: break-word;
        word-break: break-word;
        hyphens: auto;
        white-space: normal;
        line-height: 1.5;
    }

    .retro-button:hover {
        background: linear-gradient(145deg, #444444, #222222);
        box-shadow:
            0 0 15px var(--color-trans-pink),
            inset 0 0 5px rgba(255, 0, 255, 0.3);
        transform: translateY(-1px);
    }

    .retro-button:active {
        transform: translateY(1px);
        box-shadow:
            0 0 5px var(--color-trans-light-blue),
            inset 0 0 10px rgba(0, 0, 0, 0.5);
        background: linear-gradient(145deg, #222222, #111111);
    }

    .pixel-border {
        border-image: repeating-linear-gradient(
                45deg,
                var(--color-trans-light-blue) 0px,
                var(--color-trans-light-blue) 2px,
                var(--color-trans-pink) 2px,
                var(--color-trans-pink) 4px,
                var(--color-retro-green) 4px,
                var(--color-retro-green) 6px
            )
            2;
        border-width: 4px;
    }

    @keyframes retro-pulse {
        0% {
            text-shadow:
                0 0 3px currentColor,
                0 0 6px currentColor,
                0 0 9px currentColor;
        }
        100% {
            text-shadow:
                0 0 5px currentColor,
                0 0 10px currentColor,
                0 0 15px currentColor;
        }
    }

    @keyframes retro-scroll {
        0% {
            background-position:
                0px 0px,
                0px 0px;
        }
        100% {
            background-position:
                32px 32px,
                64px 64px;
        }
    }

    @keyframes retro-glitch {
        0%,
        100% {
            transform: translate(0);
            filter: hue-rotate(0deg);
        }
        10% {
            transform: translate(-2px, 2px);
            filter: hue-rotate(90deg);
        }
        20% {
            transform: translate(2px, -2px);
            filter: hue-rotate(180deg);
        }
        30% {
            transform: translate(-2px, -2px);
            filter: hue-rotate(270deg);
        }
        40% {
            transform: translate(2px, 2px);
            filter: hue-rotate(360deg);
        }
    }

    .retro-text-glow {
        text-shadow:
            0 0 5px currentColor,
            0 0 10px currentColor,
            0 0 15px currentColor,
            0 0 20px currentColor;
        animation: retro-glitch 0.3s infinite;
        animation-play-state: paused;
    }

    .retro-text-glow:hover {
        animation-play-state: running;
    }

    .nes-container {
        background: var(--color-retro-dark);
        border: 4px solid var(--color-trans-pink);
        box-shadow: 0 0 15px var(--color-trans-light-blue);
        padding: 20px;
        margin: 20px 0;
    }

    .nes-btn {
        font-family: var(--font-pixel);
        image-rendering: pixelated;
        animation: retro-pulse 1.5s infinite;
    }

    @keyframes scanlines {
        0% {
            background-position: 0 0;
        }
        100% {
            background-position: 0 8px;
        }
    }

    @keyframes low-poly-shift {
        0% {
            background-position:
                0 0,
                0 0,
                0 0;
        }
        100% {
            background-position:
                0 0,
                100px 100px,
                0 0;
        }
    }
}

/* Tailwind Typography: colori per il blog */
@layer components {
    .prose {
        --tw-prose-body: var(--color-trans-white);
        --tw-prose-headings: var(--color-trans-white);
        --tw-prose-links: var(--color-trans-pink);
        color: var(--color-trans-white);
    }

    .prose :where(a):not(:where([class~="not-prose"] *)) {
        color: var(--color-trans-pink);
        text-decoration-color: var(--color-trans-pink);
    }

    .prose :where(a:hover):not(:where([class~="not-prose"] *)) {
        color: var(--color-trans-pink);
        text-decoration-color: var(--color-trans-pink);
    }

    .prose :where(a:visited):not(:where([class~="not-prose"] *)) {
        color: var(--color-trans-pink);
    }
}
